# execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s run say hi
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s run scoreboard players set @s mbcounter 0

execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~ ~-1 ~ minecraft:bell run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~ ~-2 ~ minecraft:smooth_stone run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~ ~-3 ~ minecraft:smooth_stone run scoreboard players add @s mbcounter 1

# Logs
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-2 ~1 minecraft:oak_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-2 ~1 minecraft:spruce_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-2 ~1 minecraft:birch_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-2 ~1 minecraft:jungle_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-2 ~1 minecraft:acacia_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-2 ~1 minecraft:dark_oak_log run scoreboard players add @s mbcounter 1

execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-2 ~1 minecraft:oak_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-2 ~1 minecraft:spruce_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-2 ~1 minecraft:birch_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-2 ~1 minecraft:jungle_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-2 ~1 minecraft:acacia_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-2 ~1 minecraft:dark_oak_log run scoreboard players add @s mbcounter 1

execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-2 ~-1 minecraft:oak_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-2 ~-1 minecraft:spruce_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-2 ~-1 minecraft:birch_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-2 ~-1 minecraft:jungle_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-2 ~-1 minecraft:acacia_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-2 ~-1 minecraft:dark_oak_log run scoreboard players add @s mbcounter 1

execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-2 ~-1 minecraft:oak_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-2 ~-1 minecraft:spruce_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-2 ~-1 minecraft:birch_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-2 ~-1 minecraft:jungle_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-2 ~-1 minecraft:acacia_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-2 ~-1 minecraft:dark_oak_log run scoreboard players add @s mbcounter 1

execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-3 ~1 minecraft:oak_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-3 ~1 minecraft:spruce_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-3 ~1 minecraft:birch_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-3 ~1 minecraft:jungle_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-3 ~1 minecraft:acacia_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-3 ~1 minecraft:dark_oak_log run scoreboard players add @s mbcounter 1

execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-3 ~1 minecraft:oak_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-3 ~1 minecraft:spruce_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-3 ~1 minecraft:birch_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-3 ~1 minecraft:jungle_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-3 ~1 minecraft:acacia_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-3 ~1 minecraft:dark_oak_log run scoreboard players add @s mbcounter 1

execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-3 ~-1 minecraft:oak_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-3 ~-1 minecraft:spruce_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-3 ~-1 minecraft:birch_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-3 ~-1 minecraft:jungle_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-3 ~-1 minecraft:acacia_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-3 ~-1 minecraft:dark_oak_log run scoreboard players add @s mbcounter 1

execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-3 ~-1 minecraft:oak_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-3 ~-1 minecraft:spruce_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-3 ~-1 minecraft:birch_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-3 ~-1 minecraft:jungle_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-3 ~-1 minecraft:acacia_log run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-3 ~-1 minecraft:dark_oak_log run scoreboard players add @s mbcounter 1

# Planks
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~ ~-3 ~1 minecraft:oak_planks run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~ ~-3 ~1 minecraft:spruce_planks run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~ ~-3 ~1 minecraft:birch_planks run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~ ~-3 ~1 minecraft:jungle_planks run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~ ~-3 ~1 minecraft:acacia_planks run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~ ~-3 ~1 minecraft:dark_oak_planks run scoreboard players add @s mbcounter 1

execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~ ~-3 ~-1 minecraft:oak_planks run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~ ~-3 ~-1 minecraft:spruce_planks run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~ ~-3 ~-1 minecraft:birch_planks run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~ ~-3 ~-1 minecraft:jungle_planks run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~ ~-3 ~-1 minecraft:acacia_planks run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~ ~-3 ~-1 minecraft:dark_oak_planks run scoreboard players add @s mbcounter 1

execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-3 ~ minecraft:oak_planks run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-3 ~ minecraft:spruce_planks run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-3 ~ minecraft:birch_planks run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-3 ~ minecraft:jungle_planks run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-3 ~ minecraft:acacia_planks run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~1 ~-3 ~ minecraft:dark_oak_planks run scoreboard players add @s mbcounter 1

execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-3 ~ minecraft:oak_planks run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-3 ~ minecraft:spruce_planks run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-3 ~ minecraft:birch_planks run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-3 ~ minecraft:jungle_planks run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-3 ~ minecraft:acacia_planks run scoreboard players add @s mbcounter 1
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}}] at @s if block ~-1 ~-3 ~ minecraft:dark_oak_planks run scoreboard players add @s mbcounter 1

# Finalize
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}},scores={mbcounter=15..}] at @s align xyz positioned ~0.5 ~ ~0.5 run summon armor_stand ~ ~-1 ~ {Marker:1b,Tags:["towncenter"],Invisible:1b}
execute as @e[tag=mb,nbt={Item:{tag:{Scepter:1b}}},scores={mbcounter=15..}] at @s align xyz positioned ~0.5 ~ ~0.5 run summon firework_rocket ~ ~ ~ {Life:0,LifeTime:0,FireworksItem:{id:firework_rocket,Count:1,tag:{Fireworks:{Explosions:[{Type:0,Trail:1b,Colors:[I;16751931],FadeColors:[I;53040]}]}}}}
tag @e remove mb